{"ast":null,"code":"/**\r\n * Represents a transformation expression.\r\n * @param {string} expressionStr - An expression in string format.\r\n * @class Expression\r\n *\r\n */\nclass Expression {\n  constructor(expressionStr) {\n    /**\r\n     * @protected\r\n     * @inner Expression-expressions\r\n     */\n    this.expressions = [];\n\n    if (expressionStr != null) {\n      this.expressions.push(Expression.normalize(expressionStr));\n    }\n  }\n  /**\r\n   * Convenience constructor method\r\n   * @function Expression.new\r\n   */\n\n\n  static new(expressionStr) {\n    return new this(expressionStr);\n  }\n  /**\r\n   * Normalize a string expression\r\n   * @function Cloudinary#normalize\r\n   * @param {string} expression a expression, e.g. \"w gt 100\", \"width_gt_100\", \"width > 100\"\r\n   * @return {string} the normalized form of the value expression, e.g. \"w_gt_100\"\r\n   */\n\n\n  static normalize(expression) {\n    var operators, operatorsPattern, operatorsReplaceRE, predefinedVarsPattern, predefinedVarsReplaceRE;\n\n    if (expression == null) {\n      return expression;\n    }\n\n    expression = String(expression);\n    operators = \"\\\\|\\\\||>=|<=|&&|!=|>|=|<|/|-|\\\\+|\\\\*|\\\\^\"; // operators\n\n    operatorsPattern = \"((\" + operators + \")(?=[ _]))\";\n    operatorsReplaceRE = new RegExp(operatorsPattern, \"g\"); // @ts-ignore\n\n    expression = expression.replace(operatorsReplaceRE, match => OPERATORS[match]); // predefined variables\n\n    predefinedVarsPattern = \"(\" + Object.keys(PREDEFINED_VARS).join(\"|\") + \")\";\n    predefinedVarsReplaceRE = new RegExp(predefinedVarsPattern, \"g\"); // @ts-ignore\n\n    expression = expression.replace(predefinedVarsReplaceRE, (match, p1, offset) => expression[offset - 1] === '$' ? match : PREDEFINED_VARS[match]);\n    return expression.replace(/[ _]+/g, '_');\n  }\n  /**\r\n   * Serialize the expression\r\n   * @return {string} the expression as a string\r\n   */\n\n\n  serialize() {\n    return Expression.normalize(this.expressions.join(\"_\"));\n  }\n\n  toString() {\n    return this.serialize();\n  }\n  /**\r\n   * Get the parent transformation of this expression\r\n   * @return Transformation\r\n   */\n\n\n  getParent() {\n    return this.parent;\n  }\n  /**\r\n   * Set the parent transformation of this expression\r\n   * @param {Transformation} the parent transformation\r\n   * @return {Expression} this expression\r\n   */\n\n\n  setParent(parent) {\n    this.parent = parent;\n    return this;\n  }\n  /**\r\n   * Add a expression\r\n   * @function Expression#predicate\r\n   * @internal\r\n   */\n\n\n  predicate(name, operator, value) {\n    // @ts-ignore\n    if (OPERATORS[operator] != null) {\n      // @ts-ignore\n      operator = OPERATORS[operator];\n    }\n\n    this.expressions.push(`${name}_${operator}_${value}`);\n    return this;\n  }\n  /**\r\n   * @function Expression#and\r\n   */\n\n\n  and() {\n    this.expressions.push(\"and\");\n    return this;\n  }\n  /**\r\n   * @function Expression#or\r\n   */\n\n\n  or() {\n    this.expressions.push(\"or\");\n    return this;\n  }\n  /**\r\n   * Conclude expression\r\n   * @function Expression#then\r\n   * @return {Transformation} the transformation this expression is defined for\r\n   */\n\n\n  then() {\n    return this.getParent().if(this.toString());\n  }\n  /**\r\n   * @function Expression#height\r\n   * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n   * @param {string|number} value the right hand side value\r\n   * @return {Expression} this expression\r\n   */\n\n\n  height(operator, value) {\n    return this.predicate(\"h\", operator, value);\n  }\n  /**\r\n   * @function Expression#width\r\n   * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n   * @param {string|number} value the right hand side value\r\n   * @return {Expression} this expression\r\n   */\n\n\n  width(operator, value) {\n    return this.predicate(\"w\", operator, value);\n  }\n  /**\r\n   * @function Expression#aspectRatio\r\n   * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n   * @param {string|number} value the right hand side value\r\n   * @return {Expression} this expression\r\n   */\n\n\n  aspectRatio(operator, value) {\n    return this.predicate(\"ar\", operator, value);\n  }\n  /**\r\n   * @function Expression#pages\r\n   * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n   * @param {string|number} value the right hand side value\r\n   * @return {Expression} this expression\r\n   */\n\n\n  pageCount(operator, value) {\n    return this.predicate(\"pc\", operator, value);\n  }\n  /**\r\n   * @function Expression#faces\r\n   * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n   * @param {string|number} value the right hand side value\r\n   * @return {Expression} this expression\r\n   */\n\n\n  faceCount(operator, value) {\n    return this.predicate(\"fc\", operator, value);\n  }\n\n  value(value) {\n    this.expressions.push(value);\n    return this;\n  }\n  /**\r\n   */\n\n\n  static variable(name, value) {\n    return new this(name).value(value);\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"width\"\r\n   * @function Expression.width\r\n   */\n\n\n  static width() {\n    return new this(\"width\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"height\"\r\n   * @function Expression.height\r\n   */\n\n\n  static height() {\n    return new this(\"height\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"initialWidth\"\r\n   * @function Expression.initialWidth\r\n   */\n\n\n  static initialWidth() {\n    return new this(\"initialWidth\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"initialHeight\"\r\n   * @function Expression.initialHeight\r\n   */\n\n\n  static initialHeight() {\n    return new this(\"initialHeight\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"aspectRatio\"\r\n   * @function Expression.aspectRatio\r\n   */\n\n\n  static aspectRatio() {\n    return new this(\"aspectRatio\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"initialAspectRatio\"\r\n   * @function Expression.initialAspectRatio\r\n   */\n\n\n  static initialAspectRatio() {\n    return new this(\"initialAspectRatio\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"pageCount\"\r\n   * @function Expression.pageCount\r\n   */\n\n\n  static pageCount() {\n    return new this(\"pageCount\");\n  }\n  /**\r\n   * @returns Expression new expression with the predefined variable \"faceCount\"\r\n   * @function Expression.faceCount\r\n   */\n\n\n  static faceCount() {\n    return new this(\"faceCount\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"currentPage\"\r\n   * @function Expression.currentPage\r\n   */\n\n\n  static currentPage() {\n    return new this(\"currentPage\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"tags\"\r\n   * @function Expression.tags\r\n   */\n\n\n  static tags() {\n    return new this(\"tags\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"pageX\"\r\n   * @function Expression.pageX\r\n   */\n\n\n  static pageX() {\n    return new this(\"pageX\");\n  }\n  /**\r\n   * @returns Expression a new expression with the predefined variable \"pageY\"\r\n   * @function Expression.pageY\r\n   */\n\n\n  static pageY() {\n    return new this(\"pageY\");\n  }\n\n}\n/**\r\n * @internal\r\n */\n\n\nconst OPERATORS = {\n  \"=\": 'eq',\n  \"!=\": 'ne',\n  \"<\": 'lt',\n  \">\": 'gt',\n  \"<=\": 'lte',\n  \">=\": 'gte',\n  \"&&\": 'and',\n  \"||\": 'or',\n  \"*\": \"mul\",\n  \"/\": \"div\",\n  \"+\": \"add\",\n  \"-\": \"sub\",\n  \"^\": \"pow\"\n};\n/**\r\n * @internal\r\n */\n\nconst PREDEFINED_VARS = {\n  \"aspect_ratio\": \"ar\",\n  \"aspectRatio\": \"ar\",\n  \"current_page\": \"cp\",\n  \"currentPage\": \"cp\",\n  \"preview:duration\": \"preview:duration\",\n  \"duration\": \"du\",\n  \"face_count\": \"fc\",\n  \"faceCount\": \"fc\",\n  \"height\": \"h\",\n  \"initial_aspect_ratio\": \"iar\",\n  \"initial_duration\": \"idu\",\n  \"initial_height\": \"ih\",\n  \"initial_width\": \"iw\",\n  \"initialAspectRatio\": \"iar\",\n  \"initialDuration\": \"idu\",\n  \"initialHeight\": \"ih\",\n  \"initialWidth\": \"iw\",\n  \"page_count\": \"pc\",\n  \"page_x\": \"px\",\n  \"page_y\": \"py\",\n  \"pageCount\": \"pc\",\n  \"pageX\": \"px\",\n  \"pageY\": \"py\",\n  \"tags\": \"tags\",\n  \"width\": \"w\"\n};\n/**\r\n * @internal\r\n */\n\nconst BOUNDRY = \"[ _]+\";\nexport default Expression;","map":{"version":3,"sources":["C:/Users/Pham Tan Duong/Desktop/nhom6-csdlnc/fashion/node_modules/@cloudinary/url-gen/backwards/expression.js"],"names":["Expression","constructor","expressionStr","expressions","push","normalize","new","expression","operators","operatorsPattern","operatorsReplaceRE","predefinedVarsPattern","predefinedVarsReplaceRE","String","RegExp","replace","match","OPERATORS","Object","keys","PREDEFINED_VARS","join","p1","offset","serialize","toString","getParent","parent","setParent","predicate","name","operator","value","and","or","then","if","height","width","aspectRatio","pageCount","faceCount","variable","initialWidth","initialHeight","initialAspectRatio","currentPage","tags","pageX","pageY","BOUNDRY"],"mappings":"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","sourcesContent":["/**\r\n * Represents a transformation expression.\r\n * @param {string} expressionStr - An expression in string format.\r\n * @class Expression\r\n *\r\n */\r\nclass Expression {\r\n    constructor(expressionStr) {\r\n        /**\r\n         * @protected\r\n         * @inner Expression-expressions\r\n         */\r\n        this.expressions = [];\r\n        if (expressionStr != null) {\r\n            this.expressions.push(Expression.normalize(expressionStr));\r\n        }\r\n    }\r\n    /**\r\n     * Convenience constructor method\r\n     * @function Expression.new\r\n     */\r\n    static new(expressionStr) {\r\n        return new this(expressionStr);\r\n    }\r\n    /**\r\n     * Normalize a string expression\r\n     * @function Cloudinary#normalize\r\n     * @param {string} expression a expression, e.g. \"w gt 100\", \"width_gt_100\", \"width > 100\"\r\n     * @return {string} the normalized form of the value expression, e.g. \"w_gt_100\"\r\n     */\r\n    static normalize(expression) {\r\n        var operators, operatorsPattern, operatorsReplaceRE, predefinedVarsPattern, predefinedVarsReplaceRE;\r\n        if (expression == null) {\r\n            return expression;\r\n        }\r\n        expression = String(expression);\r\n        operators = \"\\\\|\\\\||>=|<=|&&|!=|>|=|<|/|-|\\\\+|\\\\*|\\\\^\";\r\n        // operators\r\n        operatorsPattern = \"((\" + operators + \")(?=[ _]))\";\r\n        operatorsReplaceRE = new RegExp(operatorsPattern, \"g\");\r\n        // @ts-ignore\r\n        expression = expression.replace(operatorsReplaceRE, match => OPERATORS[match]);\r\n        // predefined variables\r\n        predefinedVarsPattern = \"(\" + Object.keys(PREDEFINED_VARS).join(\"|\") + \")\";\r\n        predefinedVarsReplaceRE = new RegExp(predefinedVarsPattern, \"g\");\r\n        // @ts-ignore\r\n        expression = expression.replace(predefinedVarsReplaceRE, (match, p1, offset) => (expression[offset - 1] === '$' ? match : PREDEFINED_VARS[match]));\r\n        return expression.replace(/[ _]+/g, '_');\r\n    }\r\n    /**\r\n     * Serialize the expression\r\n     * @return {string} the expression as a string\r\n     */\r\n    serialize() {\r\n        return Expression.normalize(this.expressions.join(\"_\"));\r\n    }\r\n    toString() {\r\n        return this.serialize();\r\n    }\r\n    /**\r\n     * Get the parent transformation of this expression\r\n     * @return Transformation\r\n     */\r\n    getParent() {\r\n        return this.parent;\r\n    }\r\n    /**\r\n     * Set the parent transformation of this expression\r\n     * @param {Transformation} the parent transformation\r\n     * @return {Expression} this expression\r\n     */\r\n    setParent(parent) {\r\n        this.parent = parent;\r\n        return this;\r\n    }\r\n    /**\r\n     * Add a expression\r\n     * @function Expression#predicate\r\n     * @internal\r\n     */\r\n    predicate(name, operator, value) {\r\n        // @ts-ignore\r\n        if (OPERATORS[operator] != null) {\r\n            // @ts-ignore\r\n            operator = OPERATORS[operator];\r\n        }\r\n        this.expressions.push(`${name}_${operator}_${value}`);\r\n        return this;\r\n    }\r\n    /**\r\n     * @function Expression#and\r\n     */\r\n    and() {\r\n        this.expressions.push(\"and\");\r\n        return this;\r\n    }\r\n    /**\r\n     * @function Expression#or\r\n     */\r\n    or() {\r\n        this.expressions.push(\"or\");\r\n        return this;\r\n    }\r\n    /**\r\n     * Conclude expression\r\n     * @function Expression#then\r\n     * @return {Transformation} the transformation this expression is defined for\r\n     */\r\n    then() {\r\n        return this.getParent().if(this.toString());\r\n    }\r\n    /**\r\n     * @function Expression#height\r\n     * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n     * @param {string|number} value the right hand side value\r\n     * @return {Expression} this expression\r\n     */\r\n    height(operator, value) {\r\n        return this.predicate(\"h\", operator, value);\r\n    }\r\n    /**\r\n     * @function Expression#width\r\n     * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n     * @param {string|number} value the right hand side value\r\n     * @return {Expression} this expression\r\n     */\r\n    width(operator, value) {\r\n        return this.predicate(\"w\", operator, value);\r\n    }\r\n    /**\r\n     * @function Expression#aspectRatio\r\n     * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n     * @param {string|number} value the right hand side value\r\n     * @return {Expression} this expression\r\n     */\r\n    aspectRatio(operator, value) {\r\n        return this.predicate(\"ar\", operator, value);\r\n    }\r\n    /**\r\n     * @function Expression#pages\r\n     * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n     * @param {string|number} value the right hand side value\r\n     * @return {Expression} this expression\r\n     */\r\n    pageCount(operator, value) {\r\n        return this.predicate(\"pc\", operator, value);\r\n    }\r\n    /**\r\n     * @function Expression#faces\r\n     * @param {string} operator the comparison operator (e.g. \"<\", \"lt\")\r\n     * @param {string|number} value the right hand side value\r\n     * @return {Expression} this expression\r\n     */\r\n    faceCount(operator, value) {\r\n        return this.predicate(\"fc\", operator, value);\r\n    }\r\n    value(value) {\r\n        this.expressions.push(value);\r\n        return this;\r\n    }\r\n    /**\r\n     */\r\n    static variable(name, value) {\r\n        return new this(name).value(value);\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"width\"\r\n     * @function Expression.width\r\n     */\r\n    static width() {\r\n        return new this(\"width\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"height\"\r\n     * @function Expression.height\r\n     */\r\n    static height() {\r\n        return new this(\"height\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"initialWidth\"\r\n     * @function Expression.initialWidth\r\n     */\r\n    static initialWidth() {\r\n        return new this(\"initialWidth\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"initialHeight\"\r\n     * @function Expression.initialHeight\r\n     */\r\n    static initialHeight() {\r\n        return new this(\"initialHeight\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"aspectRatio\"\r\n     * @function Expression.aspectRatio\r\n     */\r\n    static aspectRatio() {\r\n        return new this(\"aspectRatio\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"initialAspectRatio\"\r\n     * @function Expression.initialAspectRatio\r\n     */\r\n    static initialAspectRatio() {\r\n        return new this(\"initialAspectRatio\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"pageCount\"\r\n     * @function Expression.pageCount\r\n     */\r\n    static pageCount() {\r\n        return new this(\"pageCount\");\r\n    }\r\n    /**\r\n     * @returns Expression new expression with the predefined variable \"faceCount\"\r\n     * @function Expression.faceCount\r\n     */\r\n    static faceCount() {\r\n        return new this(\"faceCount\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"currentPage\"\r\n     * @function Expression.currentPage\r\n     */\r\n    static currentPage() {\r\n        return new this(\"currentPage\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"tags\"\r\n     * @function Expression.tags\r\n     */\r\n    static tags() {\r\n        return new this(\"tags\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"pageX\"\r\n     * @function Expression.pageX\r\n     */\r\n    static pageX() {\r\n        return new this(\"pageX\");\r\n    }\r\n    /**\r\n     * @returns Expression a new expression with the predefined variable \"pageY\"\r\n     * @function Expression.pageY\r\n     */\r\n    static pageY() {\r\n        return new this(\"pageY\");\r\n    }\r\n}\r\n/**\r\n * @internal\r\n */\r\nconst OPERATORS = {\r\n    \"=\": 'eq',\r\n    \"!=\": 'ne',\r\n    \"<\": 'lt',\r\n    \">\": 'gt',\r\n    \"<=\": 'lte',\r\n    \">=\": 'gte',\r\n    \"&&\": 'and',\r\n    \"||\": 'or',\r\n    \"*\": \"mul\",\r\n    \"/\": \"div\",\r\n    \"+\": \"add\",\r\n    \"-\": \"sub\",\r\n    \"^\": \"pow\",\r\n};\r\n/**\r\n * @internal\r\n */\r\nconst PREDEFINED_VARS = {\r\n    \"aspect_ratio\": \"ar\",\r\n    \"aspectRatio\": \"ar\",\r\n    \"current_page\": \"cp\",\r\n    \"currentPage\": \"cp\",\r\n    \"preview:duration\": \"preview:duration\",\r\n    \"duration\": \"du\",\r\n    \"face_count\": \"fc\",\r\n    \"faceCount\": \"fc\",\r\n    \"height\": \"h\",\r\n    \"initial_aspect_ratio\": \"iar\",\r\n    \"initial_duration\": \"idu\",\r\n    \"initial_height\": \"ih\",\r\n    \"initial_width\": \"iw\",\r\n    \"initialAspectRatio\": \"iar\",\r\n    \"initialDuration\": \"idu\",\r\n    \"initialHeight\": \"ih\",\r\n    \"initialWidth\": \"iw\",\r\n    \"page_count\": \"pc\",\r\n    \"page_x\": \"px\",\r\n    \"page_y\": \"py\",\r\n    \"pageCount\": \"pc\",\r\n    \"pageX\": \"px\",\r\n    \"pageY\": \"py\",\r\n    \"tags\": \"tags\",\r\n    \"width\": \"w\"\r\n};\r\n/**\r\n * @internal\r\n */\r\nconst BOUNDRY = \"[ _]+\";\r\nexport default Expression;\r\n"]},"metadata":{},"sourceType":"module"}