{"ast":null,"code":"import { Qualifier } from \"../../../internal/qualifier/Qualifier.js\";\nimport { Action } from \"../../../internal/Action.js\";\nimport { custom, faces } from \"../../../qualifiers/region.js\";\n/**\r\n * @description The Action class of the pixelate Builder\r\n * @extends SDK.Action\r\n * @memberOf Actions.Effect\r\n * @see Visit {@link Actions.Effect|Effect} for an example\r\n */\n\nclass Pixelate extends Action {\n  constructor(squareSize) {\n    super();\n    this._actionModel = {};\n    this._squareSize = squareSize;\n    this._actionModel.actionType = 'pixelate';\n    this._actionModel.squareSize = squareSize;\n  }\n  /**\r\n   * @description Specifies the region to piexlate.\r\n   * @param {NamedRegion} pixelateRegion\r\n   */\n\n\n  region(pixelateRegion) {\n    this._region = pixelateRegion;\n    this._actionModel.region = {\n      RegionType: this._region.regionType\n    };\n    return this;\n  }\n  /**\r\n   * @description Sets the squareSize of the pixelate effect.\r\n   * @param {number | string} squareSize\r\n   */\n\n\n  squareSize(squareSize) {\n    this._squareSize = squareSize;\n    this._actionModel.squareSize = squareSize;\n    return this;\n  }\n\n  prepareQualifiers() {\n    /*\r\n     * pixelate with region is a unique object in this codebase.\r\n     * On top of pixelate being an Action with Qualifiers,\r\n     * it also accepts a Qualifier called Region.\r\n     *\r\n     * This Qualifier is in itself composite of qualifiers (such as height, or width).\r\n     * The existence of Region changes the output of pixelate in non traditional ways\r\n     * which forced this relatively ad-hoc implementation.\r\n     *\r\n     * Aside from all of that, all of the Qualifiers in the component should be alphabetized\r\n     * This happens naturally in the Action class,\r\n     * however since we're dealing with two levels of qualifiers (pixelate and Region),\r\n     * these need to be merged.\r\n     *\r\n     * This function will merge the Region qualifiers with pixelate\r\n     * and add all needed implicit qualifiers (like g_ocr_text).\r\n     * We're not using the full Gravity Qualifier here to prevent the code import for such a simplistic case\r\n     */\n    const str = this._squareSize ? `:${this._squareSize}` : '';\n\n    if ('_region' in this) {\n      const qualifiers = this._region.qualifiers; // Copy qualifiers from the region \"action\" to the pixelate action\n\n      qualifiers.forEach(q => this.addQualifier(q));\n\n      if (this._region.regionType === 'named') {\n        this.addQualifier(new Qualifier('e', `pixelate_region${str}`));\n      }\n\n      if (this._region.regionType === 'ocr_text') {\n        this.addQualifier(new Qualifier('e', `pixelate_region${str}`));\n        this.addQualifier(new Qualifier('g', `ocr_text`));\n      }\n\n      if (this._region.regionType === 'faces') {\n        this.addQualifier(new Qualifier('e', `pixelate_faces${str}`));\n      }\n    } else {\n      this.addQualifier(new Qualifier('e', `pixelate${str}`));\n    }\n  }\n\n  static fromJson(actionModel) {\n    const {\n      actionType,\n      region,\n      squareSize\n    } = actionModel; // We are using this() to allow inheriting classes to use super.fromJson.apply(this, [actionModel])\n    // This allows the inheriting classes to determine the class to be created\n\n    const result = new this(squareSize);\n    squareSize && result.squareSize(squareSize);\n\n    if (region && region.RegionType === 'faces') {\n      result.region(faces());\n    }\n\n    if (region && region.RegionType === 'custom') {\n      result.region(custom());\n    }\n\n    return result;\n  }\n\n}\n\nexport { Pixelate };","map":{"version":3,"sources":["C:/Users/Pham Tan Duong/Desktop/nhom6-csdlnc/fashion/node_modules/@cloudinary/url-gen/actions/effect/pixelate/Pixelate.js"],"names":["Qualifier","Action","custom","faces","Pixelate","constructor","squareSize","_actionModel","_squareSize","actionType","region","pixelateRegion","_region","RegionType","regionType","prepareQualifiers","str","qualifiers","forEach","q","addQualifier","fromJson","actionModel","result"],"mappings":"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","sourcesContent":["import { Qualifier } from \"../../../internal/qualifier/Qualifier.js\";\r\nimport { Action } from \"../../../internal/Action.js\";\r\nimport { custom, faces } from \"../../../qualifiers/region.js\";\r\n/**\r\n * @description The Action class of the pixelate Builder\r\n * @extends SDK.Action\r\n * @memberOf Actions.Effect\r\n * @see Visit {@link Actions.Effect|Effect} for an example\r\n */\r\nclass Pixelate extends Action {\r\n    constructor(squareSize) {\r\n        super();\r\n        this._actionModel = {};\r\n        this._squareSize = squareSize;\r\n        this._actionModel.actionType = 'pixelate';\r\n        this._actionModel.squareSize = squareSize;\r\n    }\r\n    /**\r\n     * @description Specifies the region to piexlate.\r\n     * @param {NamedRegion} pixelateRegion\r\n     */\r\n    region(pixelateRegion) {\r\n        this._region = pixelateRegion;\r\n        this._actionModel.region = { RegionType: this._region.regionType };\r\n        return this;\r\n    }\r\n    /**\r\n     * @description Sets the squareSize of the pixelate effect.\r\n     * @param {number | string} squareSize\r\n     */\r\n    squareSize(squareSize) {\r\n        this._squareSize = squareSize;\r\n        this._actionModel.squareSize = squareSize;\r\n        return this;\r\n    }\r\n    prepareQualifiers() {\r\n        /*\r\n         * pixelate with region is a unique object in this codebase.\r\n         * On top of pixelate being an Action with Qualifiers,\r\n         * it also accepts a Qualifier called Region.\r\n         *\r\n         * This Qualifier is in itself composite of qualifiers (such as height, or width).\r\n         * The existence of Region changes the output of pixelate in non traditional ways\r\n         * which forced this relatively ad-hoc implementation.\r\n         *\r\n         * Aside from all of that, all of the Qualifiers in the component should be alphabetized\r\n         * This happens naturally in the Action class,\r\n         * however since we're dealing with two levels of qualifiers (pixelate and Region),\r\n         * these need to be merged.\r\n         *\r\n         * This function will merge the Region qualifiers with pixelate\r\n         * and add all needed implicit qualifiers (like g_ocr_text).\r\n         * We're not using the full Gravity Qualifier here to prevent the code import for such a simplistic case\r\n         */\r\n        const str = this._squareSize ? `:${this._squareSize}` : '';\r\n        if ('_region' in this) {\r\n            const qualifiers = this._region.qualifiers;\r\n            // Copy qualifiers from the region \"action\" to the pixelate action\r\n            qualifiers.forEach((q) => this.addQualifier(q));\r\n            if (this._region.regionType === 'named') {\r\n                this.addQualifier(new Qualifier('e', `pixelate_region${str}`));\r\n            }\r\n            if (this._region.regionType === 'ocr_text') {\r\n                this.addQualifier(new Qualifier('e', `pixelate_region${str}`));\r\n                this.addQualifier(new Qualifier('g', `ocr_text`));\r\n            }\r\n            if (this._region.regionType === 'faces') {\r\n                this.addQualifier(new Qualifier('e', `pixelate_faces${str}`));\r\n            }\r\n        }\r\n        else {\r\n            this.addQualifier(new Qualifier('e', `pixelate${str}`));\r\n        }\r\n    }\r\n    static fromJson(actionModel) {\r\n        const { actionType, region, squareSize } = actionModel;\r\n        // We are using this() to allow inheriting classes to use super.fromJson.apply(this, [actionModel])\r\n        // This allows the inheriting classes to determine the class to be created\r\n        const result = new this(squareSize);\r\n        squareSize && result.squareSize(squareSize);\r\n        if (region && region.RegionType === 'faces') {\r\n            result.region(faces());\r\n        }\r\n        if (region && region.RegionType === 'custom') {\r\n            result.region(custom());\r\n        }\r\n        return result;\r\n    }\r\n}\r\nexport { Pixelate };\r\n"]},"metadata":{},"sourceType":"module"}